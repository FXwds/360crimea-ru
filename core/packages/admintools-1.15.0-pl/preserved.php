<?php return array (
  'dda63cdbbed4cbff4695a74c47d557fb' => 
  array (
    'criteria' => 
    array (
      'name' => 'admintools',
    ),
    'object' => 
    array (
      'name' => 'admintools',
      'path' => '{core_path}components/admintools/',
      'assets_path' => '',
    ),
  ),
  'a5f9a563ade2ec0293e5c2dd38f2868b' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_favorites_icon',
    ),
    'object' => 
    array (
      'key' => 'admintools_favorites_icon',
      'value' => '',
      'xtype' => 'textfield',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  'a618a6d934404345438cf7c8d01c2103' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_check_elements_permissions',
    ),
    'object' => 
    array (
      'key' => 'admintools_check_elements_permissions',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_permissions',
      'editedon' => NULL,
    ),
  ),
  'bf1336ba9133b163654bf3073bb8fd24' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_remember_system_settings',
    ),
    'object' => 
    array (
      'key' => 'admintools_remember_system_settings',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  '58270fdf89d05073dff56c01f2cc05e6' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_enable_elements_log',
    ),
    'object' => 
    array (
      'key' => 'admintools_enable_elements_log',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  '572e1a7ff32834be4211c39078b0a125' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_enable_favorite_elements',
    ),
    'object' => 
    array (
      'key' => 'admintools_enable_favorite_elements',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  '4fa6f68463f7cbefafeaa2f870fa68d4' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_clear_only_resource_cache',
    ),
    'object' => 
    array (
      'key' => 'admintools_clear_only_resource_cache',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  'dea2857433503340c5fc2b2e97efa3e4' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_hide_component_description',
    ),
    'object' => 
    array (
      'key' => 'admintools_hide_component_description',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  'fda695d4ef0a0ad1ce4f363a032dedb7' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_email_authorization',
    ),
    'object' => 
    array (
      'key' => 'admintools_email_authorization',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_authorization',
      'editedon' => NULL,
    ),
  ),
  '3ea4f846bf78a3f92fe54fb57ad4fa22' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_authorization_ttl',
    ),
    'object' => 
    array (
      'key' => 'admintools_authorization_ttl',
      'value' => '600',
      'xtype' => 'numberfield',
      'namespace' => 'admintools',
      'area' => 'admintools_authorization',
      'editedon' => NULL,
    ),
  ),
  'b31dcad34bf881ca973c4136c63f17c1' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_loginform_resource',
    ),
    'object' => 
    array (
      'key' => 'admintools_loginform_resource',
      'value' => '',
      'xtype' => 'numberfield',
      'namespace' => 'admintools',
      'area' => 'admintools_authorization',
      'editedon' => NULL,
    ),
  ),
  'b792d6db788963ce004f2c800226f67d' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_enable_notes',
    ),
    'object' => 
    array (
      'key' => 'admintools_enable_notes',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  '29251a3a4b60312657ed42e259642ab2' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_template_resource_relationship',
    ),
    'object' => 
    array (
      'key' => 'admintools_template_resource_relationship',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  '7144e0c59c2eb5d8f8de9a5a906431d2' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_animate_menu',
    ),
    'object' => 
    array (
      'key' => 'admintools_animate_menu',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  'd63e9b30bc1667c504f596df3891e59b' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_alternative_permissions',
    ),
    'object' => 
    array (
      'key' => 'admintools_alternative_permissions',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_permissions',
      'editedon' => NULL,
    ),
  ),
  '3a5c171bb6b8d85b0047347d302c2637' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_plugins_events',
    ),
    'object' => 
    array (
      'key' => 'admintools_plugins_events',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  '53a757ec696f09ee49ffcf0ca5c024e6' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_theme',
    ),
    'object' => 
    array (
      'key' => 'admintools_theme',
      'value' => 'dark',
      'xtype' => 'textfield',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => '2018-10-29 23:13:25',
    ),
  ),
  'e72da78048214c0377139c46d53c9583' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_modx_tree_position',
    ),
    'object' => 
    array (
      'key' => 'admintools_modx_tree_position',
      'value' => 'left',
      'xtype' => 'textfield',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  'e779eaefae6fbdd8660213d0ee43192c' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_custom_css',
    ),
    'object' => 
    array (
      'key' => 'admintools_custom_css',
      'value' => '',
      'xtype' => 'textfield',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  '2b24c06f7b0b5883553d3bb664a43aae' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_custom_js',
    ),
    'object' => 
    array (
      'key' => 'admintools_custom_js',
      'value' => '/assets/js/jquery-3.3.1.min.js',
      'xtype' => 'textfield',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => '2018-05-04 10:39:59',
    ),
  ),
  '093ff575f55da22a8fcdd5ae0f2d9d44' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_package_actions',
    ),
    'object' => 
    array (
      'key' => 'admintools_package_actions',
      'value' => '',
      'xtype' => 'textfield',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  'ece54ce9ced8376a04ea182d8136ac03' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_only_current_context_user',
    ),
    'object' => 
    array (
      'key' => 'admintools_only_current_context_user',
      'value' => '',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_main',
      'editedon' => NULL,
    ),
  ),
  '8a1b4e24031426cafd8c1525fbd007c0' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_show_lockmenu',
    ),
    'object' => 
    array (
      'key' => 'admintools_show_lockmenu',
      'value' => '1',
      'xtype' => 'combo-boolean',
      'namespace' => 'admintools',
      'area' => 'admintools_security',
      'editedon' => NULL,
    ),
  ),
  '10e3075bb215a6a930e7d65f58b34a33' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_lock_timeout',
    ),
    'object' => 
    array (
      'key' => 'admintools_lock_timeout',
      'value' => '0',
      'xtype' => 'numberfield',
      'namespace' => 'admintools',
      'area' => 'admintools_security',
      'editedon' => NULL,
    ),
  ),
  'c6649dc73ed4a6c4561ea20bc4d4ae32' => 
  array (
    'criteria' => 
    array (
      'key' => 'admintools_unlock_code',
    ),
    'object' => 
    array (
      'key' => 'admintools_unlock_code',
      'value' => '',
      'xtype' => 'textfield',
      'namespace' => 'admintools',
      'area' => 'admintools_security',
      'editedon' => NULL,
    ),
  ),
  '8443df6f409f7ba15cd9ba00f5de02dc' => 
  array (
    'criteria' => 
    array (
      'category' => 'AdminTools',
    ),
    'object' => 
    array (
      'id' => 34,
      'parent' => 0,
      'category' => 'AdminTools',
      'rank' => 0,
    ),
  ),
  '73ba5694df0e31326885afd3caf74791' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.login.form',
    ),
    'object' => 
    array (
      'id' => 71,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.login.form',
      'description' => '',
      'editor_type' => 0,
      'category' => 34,
      'cache_type' => 0,
      'snippet' => '<div id="container">
	<div id="modx-login-logo">
		<!--[if gte IE 9]><!--><img src="/manager/templates/default/images/modx-logo-color.svg" alt="MODX CMS/CMF"><!--<![endif]-->
		<!--[if lt IE 9]><img alt="MODX CMS/CMF" src="/manager/templates/default/images/modx-logo-color.png" /><![endif]-->
	</div>

	<div class="modx-form" id="modx-login-panel">
		<div class="panel-title">
			<h2>[[++site_name]]</h2>
		</div>
		<div id="errormsg">[[+errormsg]]</div>
		<div class="panel-body">
			<form method="post" action="" id="manager-login-form">
				<div class="login-form-item">
					<div class="login-form-element">
						<input type="text" placeholder="[[%admintools_username_email]]" class="form-text" name="userdata" id="userdata" autocomplete="on">
					</div>
				</div>
				<div class="form-action">
					<button id="send-email-btn" value="1" type="button" class="primary-button login-form-btn">[[%admintools_send_authorization_link]]</button>
				</div>
			</form>
		</div>
	</div>
</div>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/admintools/elements/chunks/chunk.login.form.tpl',
      'content' => '<div id="container">
	<div id="modx-login-logo">
		<!--[if gte IE 9]><!--><img src="/manager/templates/default/images/modx-logo-color.svg" alt="MODX CMS/CMF"><!--<![endif]-->
		<!--[if lt IE 9]><img alt="MODX CMS/CMF" src="/manager/templates/default/images/modx-logo-color.png" /><![endif]-->
	</div>

	<div class="modx-form" id="modx-login-panel">
		<div class="panel-title">
			<h2>[[++site_name]]</h2>
		</div>
		<div id="errormsg">[[+errormsg]]</div>
		<div class="panel-body">
			<form method="post" action="" id="manager-login-form">
				<div class="login-form-item">
					<div class="login-form-element">
						<input type="text" placeholder="[[%admintools_username_email]]" class="form-text" name="userdata" id="userdata" autocomplete="on">
					</div>
				</div>
				<div class="form-action">
					<button id="send-email-btn" value="1" type="button" class="primary-button login-form-btn">[[%admintools_send_authorization_link]]</button>
				</div>
			</form>
		</div>
	</div>
</div>',
    ),
  ),
  'f862920702504da72893695424f2057d' => 
  array (
    'criteria' => 
    array (
      'name' => 'tpl.lockScreen',
    ),
    'object' => 
    array (
      'id' => 72,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'tpl.lockScreen',
      'description' => '',
      'editor_type' => 0,
      'category' => 34,
      'cache_type' => 0,
      'snippet' => '<!DOCTYPE html>
<html lang="[[+lang]]">
<head>
	<meta charset="UTF-8">
	<title>[[+title]]</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style>
		.lockscreen {
			background-image: url([[+assets_url]]components/admintools/images/lockscreen.jpg);
		}
		@media only screen and (max-width : 767px) {
			.lockscreen {
				background-image: url([[+assets_url]]components/admintools/images/lockscreen800.jpg);
			}
		}
		@media only screen and (min-width : 768px) and (max-width: 1223px) {
			.lockscreen {
				background-image: url([[+assets_url]]components/admintools/images/lockscreen1280.jpg);
			}
		}
		.lockscreen .container {
			background-color: rgba(255,255,255,0.1);
			margin: 5% auto 0;
			padding: 20px;
			text-align: center;
			width: 250px;
		}
		.lockscreen .form-element {
			box-sizing: border-box;
			font-size: 14px;
			margin: 5px 0;
			padding: 6px 12px;
			width: 220px;
		}
		.lockscreen .username {
			font-size: 20px;
			color: #fff;
			padding: 10px;
		}
		.lockscreen input {
			border: 1px solid transparent;
		}
		.lockscreen input:focus {
			border-color: #45a2ec;
			outline: 0;
		}
		.lockscreen .btn {
			display: inline-block;
			color: #fff;
			background-color: #3697CD;
			font-weight: bold;
			line-height: 1.6;
			text-align: center;
			vertical-align: middle;
			cursor: pointer;
			border: 1px solid #3CA4DE;
		}
		.btn:hover {
			color: #fff;
			background-color: #286090;
			border-color: #1e4c74;
		}
	</style>
</head>
<body class="lockscreen">
<div class="container">
	<div class="photo"><img src="[[+photo]]" alt="avatar" onsubmit="return false;"></div>
	<div class="username">[[+username]]</div>
	<form name="unlockform" action="[[+form_action]]" method="POST">
		<div>
			<input id="unlock_code" class="form-element" type="password" name="unlock_code" placeholder="[[%admintools_enter_password_or_unlockcode]]" required>
		</div>
		<div>
			<button class="form-element btn submit-btn">[[%admintools_unlock]]</button>
		</div>
	</form>
</div>
<script>
	document.forms[0].addEventListener("submit", function(event) {
		event.preventDefault();
		let body = "admintools_action=unlock&action=mgr/system/unlock&unlock_code=" + encodeURIComponent(unlock_code.value) + "&HTTP_MODAUTH=[[+auth]]";
		let xhr = new XMLHttpRequest();
		xhr.open(this.getAttribute(\'method\'), this.getAttribute(\'action\'), true);
		xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
		xhr.setRequestHeader(\'Content-Type\', \'application/x-www-form-urlencoded\');
		xhr.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				document.location.reload();
			}
		};

		xhr.send(body);
	});
</script>
</body>
</html>',
      'locked' => 0,
      'properties' => NULL,
      'static' => 0,
      'static_file' => 'core/components/admintools/elements/chunks/chunk.lockscreen.tpl',
      'content' => '<!DOCTYPE html>
<html lang="[[+lang]]">
<head>
	<meta charset="UTF-8">
	<title>[[+title]]</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<style>
		.lockscreen {
			background-image: url([[+assets_url]]components/admintools/images/lockscreen.jpg);
		}
		@media only screen and (max-width : 767px) {
			.lockscreen {
				background-image: url([[+assets_url]]components/admintools/images/lockscreen800.jpg);
			}
		}
		@media only screen and (min-width : 768px) and (max-width: 1223px) {
			.lockscreen {
				background-image: url([[+assets_url]]components/admintools/images/lockscreen1280.jpg);
			}
		}
		.lockscreen .container {
			background-color: rgba(255,255,255,0.1);
			margin: 5% auto 0;
			padding: 20px;
			text-align: center;
			width: 250px;
		}
		.lockscreen .form-element {
			box-sizing: border-box;
			font-size: 14px;
			margin: 5px 0;
			padding: 6px 12px;
			width: 220px;
		}
		.lockscreen .username {
			font-size: 20px;
			color: #fff;
			padding: 10px;
		}
		.lockscreen input {
			border: 1px solid transparent;
		}
		.lockscreen input:focus {
			border-color: #45a2ec;
			outline: 0;
		}
		.lockscreen .btn {
			display: inline-block;
			color: #fff;
			background-color: #3697CD;
			font-weight: bold;
			line-height: 1.6;
			text-align: center;
			vertical-align: middle;
			cursor: pointer;
			border: 1px solid #3CA4DE;
		}
		.btn:hover {
			color: #fff;
			background-color: #286090;
			border-color: #1e4c74;
		}
	</style>
</head>
<body class="lockscreen">
<div class="container">
	<div class="photo"><img src="[[+photo]]" alt="avatar" onsubmit="return false;"></div>
	<div class="username">[[+username]]</div>
	<form name="unlockform" action="[[+form_action]]" method="POST">
		<div>
			<input id="unlock_code" class="form-element" type="password" name="unlock_code" placeholder="[[%admintools_enter_password_or_unlockcode]]" required>
		</div>
		<div>
			<button class="form-element btn submit-btn">[[%admintools_unlock]]</button>
		</div>
	</form>
</div>
<script>
	document.forms[0].addEventListener("submit", function(event) {
		event.preventDefault();
		let body = "admintools_action=unlock&action=mgr/system/unlock&unlock_code=" + encodeURIComponent(unlock_code.value) + "&HTTP_MODAUTH=[[+auth]]";
		let xhr = new XMLHttpRequest();
		xhr.open(this.getAttribute(\'method\'), this.getAttribute(\'action\'), true);
		xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
		xhr.setRequestHeader(\'Content-Type\', \'application/x-www-form-urlencoded\');
		xhr.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				document.location.reload();
			}
		};

		xhr.send(body);
	});
</script>
</body>
</html>',
    ),
  ),
  '6d370012b13361c27b6ec572bc5298ce' => 
  array (
    'criteria' => 
    array (
      'name' => 'adminLogin',
    ),
    'object' => 
    array (
      'id' => 60,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'adminLogin',
      'description' => '',
      'editor_type' => 0,
      'category' => 34,
      'cache_type' => 0,
      'snippet' => '$path = $modx->getOption(\'admintools_core_path\', null, $modx->getOption(\'core_path\') . \'components/admintools/\').\'model/admintools/\';
/** @var AdminTools $AdminTools */
$AdminTools = $modx->getService(\'admintools\',\'AdminTools\',$path, $scriptProperties);
if (isset($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\') {
    $get = $modx->sanitize($_GET, $modx->sanitizePatterns);
    $get = array_map(\'trim\',$get);
    $success = true;
    $message = $modx->lexicon(\'admintools_link_is_sent\');
    if (empty($get[\'action\']) || $get[\'action\'] != \'login\') {
        $message = \'Access is denied\';
        $success = false;
    } elseif (empty($get[\'userdata\'])) {
        $message =  $modx->lexicon(\'admintools_enter_username_or_email\');
        $success = false;
    }
    if ($success) {
        if ($msg = $AdminTools->sendLoginLink($get)){
            $success = false;
            $message = $msg;
        };
    }
    $response = array(\'success\'=>$success, \'message\'=>$message);
    exit($modx->toJSON($response));
} else {
    if ($modx->user->isAuthenticated(\'mgr\')) {
        $url = $modx->getOption(\'manager_url\', null, MODX_MANAGER_URL);
        $url = $modx->getOption(\'url_scheme\', null, MODX_URL_SCHEME) . $modx->getOption(\'http_host\', null, MODX_HTTP_HOST) . rtrim($url, \'/\');
        $modx->sendRedirect($url);
    }
    $errormsg = \'\';
    if (isset($_GET[\'a\']) && isset($_GET[\'hash\']) && isset($_GET[\'id\'])) {
        $get = $modx->sanitize($_GET, $modx->sanitizePatterns);
        $data = $AdminTools->getLoginState($get[\'id\']);
        if (!empty($data) && $get[\'hash\'] == $data[\'hash\'] && !empty($data[\'uid\'])) {
            $key = md5($_SERVER[\'REMOTE_ADDR\'] . \'/\' . $_SERVER[\'HTTP_USER_AGENT\'] . $data[\'uid\']);
            if ($key == $get[\'id\']) {
                $errormsg = $AdminTools->loginUser($data[\'uid\']);
            }
        }
    }
    /** @var array $scriptProperties */
    $assetsUrl = $AdminTools->getOption(\'assetsUrl\');
    $modx->regClientCss($assetsUrl . \'css/mgr/login.css\');
    $modx->regClientScript($assetsUrl . \'js/mgr/login.js\');
    return $modx->getChunk($tpl,array(\'errormsg\'=>$errormsg));
}',
      'locked' => 0,
      'properties' => 'a:1:{s:3:"tpl";a:7:{s:4:"name";s:3:"tpl";s:4:"desc";s:19:"admintools_prop_tpl";s:4:"type";s:9:"textfield";s:7:"options";a:0:{}s:5:"value";s:14:"tpl.login.form";s:7:"lexicon";s:21:"admintools:properties";s:4:"area";s:0:"";}}',
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/admintools/elements/snippets/snippet.adminlogin.php',
      'content' => '$path = $modx->getOption(\'admintools_core_path\', null, $modx->getOption(\'core_path\') . \'components/admintools/\').\'model/admintools/\';
/** @var AdminTools $AdminTools */
$AdminTools = $modx->getService(\'admintools\',\'AdminTools\',$path, $scriptProperties);
if (isset($_SERVER[\'HTTP_X_REQUESTED_WITH\']) && $_SERVER[\'HTTP_X_REQUESTED_WITH\'] == \'XMLHttpRequest\') {
    $get = $modx->sanitize($_GET, $modx->sanitizePatterns);
    $get = array_map(\'trim\',$get);
    $success = true;
    $message = $modx->lexicon(\'admintools_link_is_sent\');
    if (empty($get[\'action\']) || $get[\'action\'] != \'login\') {
        $message = \'Access is denied\';
        $success = false;
    } elseif (empty($get[\'userdata\'])) {
        $message =  $modx->lexicon(\'admintools_enter_username_or_email\');
        $success = false;
    }
    if ($success) {
        if ($msg = $AdminTools->sendLoginLink($get)){
            $success = false;
            $message = $msg;
        };
    }
    $response = array(\'success\'=>$success, \'message\'=>$message);
    exit($modx->toJSON($response));
} else {
    if ($modx->user->isAuthenticated(\'mgr\')) {
        $url = $modx->getOption(\'manager_url\', null, MODX_MANAGER_URL);
        $url = $modx->getOption(\'url_scheme\', null, MODX_URL_SCHEME) . $modx->getOption(\'http_host\', null, MODX_HTTP_HOST) . rtrim($url, \'/\');
        $modx->sendRedirect($url);
    }
    $errormsg = \'\';
    if (isset($_GET[\'a\']) && isset($_GET[\'hash\']) && isset($_GET[\'id\'])) {
        $get = $modx->sanitize($_GET, $modx->sanitizePatterns);
        $data = $AdminTools->getLoginState($get[\'id\']);
        if (!empty($data) && $get[\'hash\'] == $data[\'hash\'] && !empty($data[\'uid\'])) {
            $key = md5($_SERVER[\'REMOTE_ADDR\'] . \'/\' . $_SERVER[\'HTTP_USER_AGENT\'] . $data[\'uid\']);
            if ($key == $get[\'id\']) {
                $errormsg = $AdminTools->loginUser($data[\'uid\']);
            }
        }
    }
    /** @var array $scriptProperties */
    $assetsUrl = $AdminTools->getOption(\'assetsUrl\');
    $modx->regClientCss($assetsUrl . \'css/mgr/login.css\');
    $modx->regClientScript($assetsUrl . \'js/mgr/login.js\');
    return $modx->getChunk($tpl,array(\'errormsg\'=>$errormsg));
}',
    ),
  ),
  'c7e006f48f58b6b6844b0dd32285fd19' => 
  array (
    'criteria' => 
    array (
      'name' => 'AdminTools',
    ),
    'object' => 
    array (
      'id' => 9,
      'source' => 1,
      'property_preprocess' => 0,
      'name' => 'AdminTools',
      'description' => '',
      'editor_type' => 0,
      'category' => 34,
      'cache_type' => 0,
      'plugincode' => '/** @var array $scriptProperties */
$path = $modx->getOption(\'admintools_core_path\', null, $modx->getOption(\'core_path\') . \'components/admintools/\').\'model/admintools/\';
/** @var AdminTools $AdminTools */
$AdminTools = $modx->getService(\'admintools\',\'AdminTools\',$path);
$elementType = null;
if ($AdminTools instanceof AdminTools) {
    switch ($modx->event->name) {
        case \'OnManagerPageBeforeRender\':
            if ($modx->user->id) $AdminTools->initialize();
            break;
        case \'OnManagerPageAfterRender\':
            if ($AdminTools->isLocked()) {
                $controller->content = $modx->getChunk(\'tpl.lockScreen\', [
                                                                \'username\' => $modx->user->username, 
                                                                \'photo\' => $modx->user->getPhoto(),
                                                                \'title\' => $modx->getOption(\'site_name\'),
                                                                \'lang\' => $modx->getOption(\'manager_language\'),
                                                                \'form_action\' => $AdminTools->getOption(\'connectorUrl\'),
                                                                \'auth\' => $modx->user->getUserToken(\'mgr\'),
                                                                \'assets_url\' => MODX_ASSETS_URL,
                                                                \'input_placeholder\' => $AdminTools->getInputPlaceholder(),
                                                            ]
                );
            }
            break;
        case \'OnDocFormSave\':
            if ($modx->getOption(\'admintools_clear_only_resource_cache\',null,false)) {
                if ($modx->event->params[\'mode\'] != \'upd\') {
                    return;
                }
                if ($resource->get(\'syncsite\')) {
                    $AdminTools->clearResourceCache($resource);
                }
                if (!empty($_POST[\'createCache\'])) {
                    $AdminTools->createResourceCache($resource->uri);
                }
            }
            break;
        case \'OnManagerPageInit\':
            if (!$modx->user->isAuthenticated(\'mgr\') && $modx->getOption(\'admintools_email_authorization\', null, false)) {
                $id = (int) $modx->getOption(\'admintools_loginform_resource\');
                if (!empty($id) && $modx->getCount(\'modResource\', array(\'id\'=>$id, \'published\'=>1, \'deleted\'=>0))) {
                    $url = $modx->makeUrl($id,\'\',\'\',\'full\');
                    $modx->setOption(\'manager_login_url_alternate\', $url);
                }
            }
            break;
        case \'OnManagerAuthentication\':
            if ($modx->getOption(\'admintools_user_can_login\', null, false)) {
                $modx->setOption(\'admintools_user_can_login\', false);
                $modx->event->output(true);
            }
            break;
        case \'OnLoadWebDocument\':
            if ($modx->user->isAuthenticated($modx->context->get(\'key\')) && (!$modx->user->active || $modx->user->Profile->blocked)) {
                $modx->runProcessor(\'security/logout\');
            }
            if ($modx->getOption(\'admintools_alternative_permissions\', null, false) && !$AdminTools->hasPermissions()){
                $modx->sendUnauthorizedPage();
            }
            break;
        case \'OnTempFormPrerender\':
            if ($modx->getOption(\'admintools_template_resource_relationship\', null, true)) {
                $modx->controller->addLastJavascript($AdminTools->getOption(\'jsUrl\') . \'mgr/templates.js\');
            }
            break;
        case \'OnDocFormPrerender\':
            $_html = array();
            if ($modx->getOption(\'admintools_template_resource_relationship\', null, true)) {
                $_html[\'tpl_res_relationship\'] = \'
            var tmpl = Ext.getCmp("modx-resource-template");
            if (tmpl.getValue()) tmpl.label.update(_("resource_template") + "&nbsp;&nbsp;<a href=\\"?a=element/template/update&id=" + tmpl.getValue() + "\\"><i class=\\"icon icon-external-link\\"></i></a>");\';
            }
            if ($modx->getOption(\'admintools_clear_only_resource_cache\', null, true) && $resource instanceof modResource) {
                $_html[\'create_resource_cache\'] = \'
            var cb = Ext.create({
                xtype: "xcheckbox",
                boxLabel: _("admintools_create_resource_cache"),
                description: _("admintools_create_resource_cache_help"),
                hideLabel: true,
                name: "createCache",
                id: "createCache",
                checked: \'. intval($modx->getOption(\'admintools_create_resource_cache\', null, false)) .\'
            });
            if (Ext.getCmp("modx-page-settings-right-box-right")) {
                Ext.getCmp("modx-page-settings-right-box-right").insert(2,cb);
                Ext.getCmp("modx-page-settings-right-box-left").add(Ext.getCmp("modx-resource-uri-override"));
                Ext.getCmp("modx-panel-resource").on("success", function(o){
                    if (o.result.object.createCache != 0) {
                        cb.setValue(true);
                    }
                });
            }\';
            }
            $output = \'\';
            if (!empty($_html)) {
            $output .= \'
    Ext.onReady(function() {
        setTimeout(function(){\' . implode("\\n", $_html) . \'
        }, 200);
    });\';
            }
            if ($modx->getOption(\'admintools_alternative_permissions\', null, true) && $modx->hasPermission(\'access_permissions\')) {
                $modx->controller->addLastJavascript($AdminTools->getOption(\'jsUrl\') . \'mgr/permissions.js\');
                $output .= \'
    Ext.ComponentMgr.onAvailable("modx-resource-tabs", function() {
		this.on("beforerender", function() {
			this.add({
				title: _("admintools_permissions"),
				border: false,
				items: [{
					layout: "anchor",
					border: false,
					items: [{
						html: _("admintools_permissions_desc"),
						border: false,
						bodyCssClass: "panel-desc"
					}, {
						xtype: "admintools-grid-permissions",
						anchor: "100%",
						cls: "main-wrapper",
						resource: \' . $id . \'
					}]
				}]
			});
		});
	});
\';
            }
            if (!empty($output)) $modx->controller->addHtml(\'<script type="text/javascript">\' . $output . \'</script>\');
            break;
        case \'OnMODXInit\':
            if ($modx->context->get(\'key\') !== \'mgr\') {
                if ( $modx->getOption(\'admintools_only_current_context_user\', null, false)
                     && $modx->user->isAuthenticated(\'mgr\')
                     && !$modx->user->isAuthenticated($modx->context->get(\'key\')) ) {
                        $modx->user = $modx->newObject(\'modUser\');
                        $modx->user->fromArray(array(\'id\' => 0, \'username\' => $modx->getOption(\'default_username\', \'\', \'(anonymous)\', true)), \'\', true);
                }
            }
            break;
    }
}',
      'locked' => 0,
      'properties' => NULL,
      'disabled' => 0,
      'moduleguid' => '',
      'static' => 0,
      'static_file' => 'core/components/admintools/elements/plugins/plugin.admintools.php',
      'content' => '/** @var array $scriptProperties */
$path = $modx->getOption(\'admintools_core_path\', null, $modx->getOption(\'core_path\') . \'components/admintools/\').\'model/admintools/\';
/** @var AdminTools $AdminTools */
$AdminTools = $modx->getService(\'admintools\',\'AdminTools\',$path);
$elementType = null;
if ($AdminTools instanceof AdminTools) {
    switch ($modx->event->name) {
        case \'OnManagerPageBeforeRender\':
            if ($modx->user->id) $AdminTools->initialize();
            break;
        case \'OnManagerPageAfterRender\':
            if ($AdminTools->isLocked()) {
                $controller->content = $modx->getChunk(\'tpl.lockScreen\', [
                                                                \'username\' => $modx->user->username, 
                                                                \'photo\' => $modx->user->getPhoto(),
                                                                \'title\' => $modx->getOption(\'site_name\'),
                                                                \'lang\' => $modx->getOption(\'manager_language\'),
                                                                \'form_action\' => $AdminTools->getOption(\'connectorUrl\'),
                                                                \'auth\' => $modx->user->getUserToken(\'mgr\'),
                                                                \'assets_url\' => MODX_ASSETS_URL,
                                                                \'input_placeholder\' => $AdminTools->getInputPlaceholder(),
                                                            ]
                );
            }
            break;
        case \'OnDocFormSave\':
            if ($modx->getOption(\'admintools_clear_only_resource_cache\',null,false)) {
                if ($modx->event->params[\'mode\'] != \'upd\') {
                    return;
                }
                if ($resource->get(\'syncsite\')) {
                    $AdminTools->clearResourceCache($resource);
                }
                if (!empty($_POST[\'createCache\'])) {
                    $AdminTools->createResourceCache($resource->uri);
                }
            }
            break;
        case \'OnManagerPageInit\':
            if (!$modx->user->isAuthenticated(\'mgr\') && $modx->getOption(\'admintools_email_authorization\', null, false)) {
                $id = (int) $modx->getOption(\'admintools_loginform_resource\');
                if (!empty($id) && $modx->getCount(\'modResource\', array(\'id\'=>$id, \'published\'=>1, \'deleted\'=>0))) {
                    $url = $modx->makeUrl($id,\'\',\'\',\'full\');
                    $modx->setOption(\'manager_login_url_alternate\', $url);
                }
            }
            break;
        case \'OnManagerAuthentication\':
            if ($modx->getOption(\'admintools_user_can_login\', null, false)) {
                $modx->setOption(\'admintools_user_can_login\', false);
                $modx->event->output(true);
            }
            break;
        case \'OnLoadWebDocument\':
            if ($modx->user->isAuthenticated($modx->context->get(\'key\')) && (!$modx->user->active || $modx->user->Profile->blocked)) {
                $modx->runProcessor(\'security/logout\');
            }
            if ($modx->getOption(\'admintools_alternative_permissions\', null, false) && !$AdminTools->hasPermissions()){
                $modx->sendUnauthorizedPage();
            }
            break;
        case \'OnTempFormPrerender\':
            if ($modx->getOption(\'admintools_template_resource_relationship\', null, true)) {
                $modx->controller->addLastJavascript($AdminTools->getOption(\'jsUrl\') . \'mgr/templates.js\');
            }
            break;
        case \'OnDocFormPrerender\':
            $_html = array();
            if ($modx->getOption(\'admintools_template_resource_relationship\', null, true)) {
                $_html[\'tpl_res_relationship\'] = \'
            var tmpl = Ext.getCmp("modx-resource-template");
            if (tmpl.getValue()) tmpl.label.update(_("resource_template") + "&nbsp;&nbsp;<a href=\\"?a=element/template/update&id=" + tmpl.getValue() + "\\"><i class=\\"icon icon-external-link\\"></i></a>");\';
            }
            if ($modx->getOption(\'admintools_clear_only_resource_cache\', null, true) && $resource instanceof modResource) {
                $_html[\'create_resource_cache\'] = \'
            var cb = Ext.create({
                xtype: "xcheckbox",
                boxLabel: _("admintools_create_resource_cache"),
                description: _("admintools_create_resource_cache_help"),
                hideLabel: true,
                name: "createCache",
                id: "createCache",
                checked: \'. intval($modx->getOption(\'admintools_create_resource_cache\', null, false)) .\'
            });
            if (Ext.getCmp("modx-page-settings-right-box-right")) {
                Ext.getCmp("modx-page-settings-right-box-right").insert(2,cb);
                Ext.getCmp("modx-page-settings-right-box-left").add(Ext.getCmp("modx-resource-uri-override"));
                Ext.getCmp("modx-panel-resource").on("success", function(o){
                    if (o.result.object.createCache != 0) {
                        cb.setValue(true);
                    }
                });
            }\';
            }
            $output = \'\';
            if (!empty($_html)) {
            $output .= \'
    Ext.onReady(function() {
        setTimeout(function(){\' . implode("\\n", $_html) . \'
        }, 200);
    });\';
            }
            if ($modx->getOption(\'admintools_alternative_permissions\', null, true) && $modx->hasPermission(\'access_permissions\')) {
                $modx->controller->addLastJavascript($AdminTools->getOption(\'jsUrl\') . \'mgr/permissions.js\');
                $output .= \'
    Ext.ComponentMgr.onAvailable("modx-resource-tabs", function() {
		this.on("beforerender", function() {
			this.add({
				title: _("admintools_permissions"),
				border: false,
				items: [{
					layout: "anchor",
					border: false,
					items: [{
						html: _("admintools_permissions_desc"),
						border: false,
						bodyCssClass: "panel-desc"
					}, {
						xtype: "admintools-grid-permissions",
						anchor: "100%",
						cls: "main-wrapper",
						resource: \' . $id . \'
					}]
				}]
			});
		});
	});
\';
            }
            if (!empty($output)) $modx->controller->addHtml(\'<script type="text/javascript">\' . $output . \'</script>\');
            break;
        case \'OnMODXInit\':
            if ($modx->context->get(\'key\') !== \'mgr\') {
                if ( $modx->getOption(\'admintools_only_current_context_user\', null, false)
                     && $modx->user->isAuthenticated(\'mgr\')
                     && !$modx->user->isAuthenticated($modx->context->get(\'key\')) ) {
                        $modx->user = $modx->newObject(\'modUser\');
                        $modx->user->fromArray(array(\'id\' => 0, \'username\' => $modx->getOption(\'default_username\', \'\', \'(anonymous)\', true)), \'\', true);
                }
            }
            break;
    }
}',
    ),
  ),
  'c925a0547b0117351ecc7a54c05f15d7' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 9,
      'event' => 'OnManagerPageBeforeRender',
    ),
    'object' => 
    array (
      'pluginid' => 9,
      'event' => 'OnManagerPageBeforeRender',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  'ffacfe294bb28f43cf452a6296b5545c' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 9,
      'event' => 'OnManagerPageAfterRender',
    ),
    'object' => 
    array (
      'pluginid' => 9,
      'event' => 'OnManagerPageAfterRender',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '4d5b32c26163e92671f68114a1efa16d' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 9,
      'event' => 'OnDocFormSave',
    ),
    'object' => 
    array (
      'pluginid' => 9,
      'event' => 'OnDocFormSave',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '755749f4dedd7139f62bf27ac98ad150' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 9,
      'event' => 'OnManagerPageInit',
    ),
    'object' => 
    array (
      'pluginid' => 9,
      'event' => 'OnManagerPageInit',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  'b5026661f2701156e800091ae31fa177' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 9,
      'event' => 'OnManagerAuthentication',
    ),
    'object' => 
    array (
      'pluginid' => 9,
      'event' => 'OnManagerAuthentication',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '8e621d268f7146f29d7ea5a329fc48ce' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 9,
      'event' => 'OnTempFormPrerender',
    ),
    'object' => 
    array (
      'pluginid' => 9,
      'event' => 'OnTempFormPrerender',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '221a7f460fede39ce3a883aec20c9dff' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 9,
      'event' => 'OnDocFormPrerender',
    ),
    'object' => 
    array (
      'pluginid' => 9,
      'event' => 'OnDocFormPrerender',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '8a406dd46a5742044b8fd181e2f85874' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 9,
      'event' => 'OnLoadWebDocument',
    ),
    'object' => 
    array (
      'pluginid' => 9,
      'event' => 'OnLoadWebDocument',
      'priority' => 0,
      'propertyset' => 0,
    ),
  ),
  '436dfb2fc5e99d449dd50d75586575f3' => 
  array (
    'criteria' => 
    array (
      'pluginid' => 9,
      'event' => 'OnMODXInit',
    ),
    'object' => 
    array (
      'pluginid' => 9,
      'event' => 'OnMODXInit',
      'priority' => -100,
      'propertyset' => 0,
    ),
  ),
);